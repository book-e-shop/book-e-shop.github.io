# Лабораторная работа №2

## Use-case авторизации

### Внешний вид формы логина

Авторизация или регистрация осуществляются по нажатию интуитивной кнопки в верхнем правом углу. Если пользователь уже зарегистрирован на сайте, он проходит авторизацию. Иначе новому пользователю необходимо пройти регистрацию, а уже затем зайти на сайт.

### Поля формы логина

Поля формы авторизации: логин, пароль.
Поля формы регистрации: имя, фамилия, почта, логин, пароль.

### Внешний вид страницы ошибки

Страница ошибки открывается при попытке попасть на несуществующую страницу сайта. 

### Внешний вид страницы после авторизации.

Пройдя авторизацию, вместо кнопки входа в верхнем правом углу отображается кнопка, на которой написаны имя и фамилия пользователя. При нажатии на эту кнопку появляется выпадающий список, в котором присутствуют поля: Личный кабинет, Выйти.

### Какие данные сайт показывает после авторизации

Пройдя авторизацию, вместо кнопки входа в верхнем правом углу отображается кнопка, на которой написаны имя и фамилия пользователя. Попав далее в личный кабинет, пользователь получает доступ к ранее внесенным данным с возможностью редактирования. Помимо этого появляется возможность добавление адресов.

### Как выглядит и как работает кнопка “выход”

Кнопка выход содержится в выпадающем списке кнопки с именем и фамилией пользователя в верхнем правом углу. При нажатии на эту кнопку происходит выход пользователя.

## Скриншоты страниц в браузере

<video autoplay muted  loop width="800" height="450" src = "video/lab2/1.mp4"></video> 

## Контрольные вопросы

> Какой тип запроса к веб-серверу следует использовать для отправки данных авторизации? Опишите почему нельзя использовать другие? Покажите скриншотом или конкретным кодом в вашем проекте, что будет, если использовать неправильный метод.

Для отправки данных аутентификации следует использовать POST запрос.

Для получения данных может быть использован запрос GET, но делать этого не стоит по ряду причин:

 * Данные, полученные с помощью GET запроса, отображаются в командной строке браузера
 * GET запросы могут кэшироваться
 * GET запросы остаются в истории браузера
 
> Что такое хэш-функция? Для чего она нужна в механизме авторизации? Приведите место в коде вашего проекта, где уместно использование хеш-функции.

Хеш-функцией называется математическое преобразование информации в короткую, определенной длины строку. Хеш-функции в механизме авторизации используют для безопасного хранения паролей пользователей не в явном виде, а в виде хеш-значений. В коде нашего проекта используется хэширование паролей:

```php
 $user->password = password_hash($data['password'], PASSWORD_DEFAULT);
```

> Какие “уязвимости” в созданном механизме авторизации вы видите? Покажите скриншот, показывающий найденную уязвимость и код, которым вы его закрыли (подсказки: прямая ссылка, “мусорные данные в авторизации”, хранение недопустимых данных в cookie).

> Как сделать чтобы после авторизации обновление страницы не вызывало запрос браузера вида “требуется повторная отправка формы”? Покажите кусок кода, которым вы убрали это сообщение.

Наличие редиректа на страницу с формой позволяет избежать сообщения “требуется повторная отправка формы”.

```php
  header('Location: index.php');
```


> Чем отличается авторизация на профессионально сделанном сайте от того, что сделали вы? Выберите проект по той же теме, по которой у вас лабораторная.

* Авторизация через сторонние источники (социальные сети, номер телефона).
* Двухфакторная аутентификация
